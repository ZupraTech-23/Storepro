<% layout('/layouts/boilerplate') -%>
  <link rel="stylesheet" href="/style/bill-show.css">



<body class="show-bill">

<div class="invoice-print">

    <!-- ================= SELLER DETAILS ================= -->
    <div class="seller-header">
        <h2><%= seller.company_name %></h2>

        <p>
            <%= seller.address %><br>
            Phone: <%= seller.phone %><br>
            Email: <%= seller.email %>
        </p>

        <% if (seller.gstin) { %>
            <p><strong>GSTIN:</strong> <%= seller.gstin %></p>
        <% } %>
    </div>

    <hr>

    <!-- ================= INVOICE TITLE ================= -->
    <h2>Tax Invoice</h2>

    <!-- ================= INVOICE META ================= -->
    <div class="invoice-meta">
        <div>
            <p><strong>Invoice No:</strong> <%= bill.invoice_no %></p>
            <p><strong>Date:</strong> <%= new Date(bill.created_at).toDateString() %></p>
        </div>

        
    </div>

    <hr>

    <!-- ================= CUSTOMER DETAILS ================= -->
    <h3>Customer Details</h3>

    <p><strong>Name:</strong> <%= bill.customer_name %></p>

    <p><strong>Address:</strong>
        <%= bill.customer_address || "N/A" %>
    </p>

    <p><strong>Phone:</strong> <%= bill.customer_phone || "N/A" %></p>

    <p><strong>GSTIN:</strong> <%= bill.customer_gstin || "N/A" %></p>

    <hr>

    <!-- ================= ITEMS TABLE ================= -->
    <h3>Items</h3>

    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Product</th>
                <th>Qty</th>
                <th>Price</th>
                <th>GST %</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            <% items.forEach((item, index) => { %>
                <tr>
                    <td><%= index + 1 %></td>
                    <td><%= item.product_name %></td>
                    <td><%= item.quantity %></td>
                    <td>â‚¹ <%= Number(item.price).toFixed(2) %></td>
                    <td><%= item.gst_percent %> %</td>
                    <td>â‚¹ <%= Number(item.total).toFixed(2) %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <hr>

    <!-- ================= TAX SUMMARY ================= -->
    <h3>Tax Summary</h3>

    <table width="40%">
        <tr>
            <td>Subtotal</td>
            <td style="text-align:right;">â‚¹ <%= Number(bill.subtotal).toFixed(2) %></td>
        </tr>
        <tr>
            <td>CGST</td>
            <td style="text-align:right;">â‚¹ <%= Number(bill.cgst).toFixed(2) %></td>
        </tr>
        <tr>
            <td>SGST</td>
            <td style="text-align:right;">â‚¹ <%= Number(bill.sgst).toFixed(2) %></td>
        </tr>
        <tr>
            <th>Grand Total</th>
            <th style="text-align:right;">â‚¹ <%= Number(bill.grand_total).toFixed(2) %></th>
        </tr>
    </table>

    <div style="clear:both;"></div>

    <hr>

    <!-- ================= ACTIONS ================= -->
    <button onclick="window.print()">ðŸ–¨ Print Invoice</button>

</div>

</body>
